<!doctype html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!-- Bootstrap, JS and CSS -->
        {% load static %}
        {% load bootstrap4 %}       {# import bootstrap4 #}
        {% bootstrap_css %}         {# Embed Bootstrap CSS #}
        {% bootstrap_javascript jquery='full' %}  {# Embed Bootstrap JS+jQuery #}
        {{ form.media }}            {# Adds date-picker required JS and CSS #}
        <link rel="stylesheet" href={% static "loading_ring_stylesheet.css" %}>
        <link rel="stylesheet" href={% static "result.css" %}>
        <script type="text/javascript" src={% static "autorefresh.js" %}></script>
        <title>WEEKEND TRIPS RESULTS</title>
    </head>
    <body id="body_section" {% if status == 1001 or status == 1002 %} onload="AutoRefresh(30000)" {% endif %}>
        <h1 align="center">Weekend Trips!</h1>
        {% if status == 1001 or status == 1002  %}
            <h2 align="center">Searching!</h2>
            <div align="center" id="loading_ring" class="loader"/>
        {% elif status == 1003 %}
            <div id="results_section">
                {% for advice in json_result %}
                    <table id="card_section" class="table">
                    <thead class="thead-dark">
                        <tr>
                            <th scope="col">Cities info:</th>
                            <th scope="col">Time info:</th>
                            <th scope="col">Tickets info:</th>
                            <th scope="col">Links:</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td scope="col">
                                <p>From: {{ advice.origin_city }}</p>
                                <p>To: {{ advice.destination_city }}</p>
                            </td>
                            <td scope="col">
                                <p>Departure time: {{ advice.depart_datetime }} </p>
                                <p>Arrival time: {{ advice.arrival_datetime }} </p>
                                <p>Return time: {{ advice.return_datetime }} </p>
                                <p>Travel time: {{ advice.travel_time }} </p>
                            </td>
                            <td scope="col">
                                <p>Ticket type: {{ advice.route_type }} </p>
                                <p>The lowest price: {{ advice.price }}</p>
                            </td>
                            <td scope="col">
                                <a href="{{ advice.url }}">Buy here!</a>
                            </td>
                        </tr>
                    </tbody>
                    </table>
                {% endfor %}
            </div>
        {% elif status == 1004 %}
            <form action="/home" method="get">
                <input type="hidden" name="task_id" value="{{ task_id }}">
                <div align="center">
                    <p>Your search have failed :( Please retry it!</p>
                    <button  class="btn btn-primary" type="submit">Retry!</button>
                </div>
            </form>
        {% endif %}
  </body>
</html>