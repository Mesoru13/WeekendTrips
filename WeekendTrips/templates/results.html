<!doctype html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!-- Bootstrap, JS and CSS -->
        {% load static %}
        {% load bootstrap4 %}       {# import bootstrap4 #}
        {% bootstrap_css %}         {# Embed Bootstrap CSS #}
        {% bootstrap_javascript jquery='full' %}  {# Embed Bootstrap JS+jQuery #}
        {{ form.media }}            {# Adds date-picker required JS and CSS #}
        <link rel="stylesheet" href={% static "loading_ring_stylesheet.css" %}>
        <link rel="stylesheet" href={% static "result.css" %}>
        <script type="text/javascript" src={% static "autorefresh.js" %}></script>
        <script type="text/javascript" src={% static "results_table_builder.js" %}></script>
        <title>WEEKEND TRIPS RESULTS</title>
    </head>
    <body id="body_section">
        <header style="position: fixed; z-index: 10; width: 100%">
        <div class="collapse bg-dark" id="navbarHeader">
            <div class="container">
                <div class="row">
                    <div class="col-sm-8 col-md-7 py-4">
                        <h4 class="text-white">About</h4>
                        <p class="text-muted">That's the service that helps you find your weekend trip!</p>
                    </div>
                    <div class="col-sm-4 offset-md-1 py-4">
                    <h4 class="text-white">Contact</h4>
                        <ul class="list-unstyled">
                            <li><a href="#" class="text-white">Like hell you'll get any!</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="navbar navbar-dark bg-dark shadow-sm">
            <div class="container d-flex justify-content-between">
                <a href="../home/?task_id={{ task_id }}" class="navbar-brand d-flex align-items-center">
                    <strong>Weekend Trips!</strong>
                </a>
                <div align="left">
                    <form action="../home/" method="get" id="try_another">
                        <input type="hidden" name="task_id" value="{{ task_id }}">
                        <button class="btn btn-primary" type="submit">Try another search!</button>
                    </form>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarHeader" aria-controls="navbarHeader" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                </div>
            </div>
        </div>
        </header>
        <div id="waiting_section" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 5">
            <div id="loading_ring" class="loader"></div>
        </div>
        <div id="ok_section" class="container" style="padding-top: 5%; padding-bottom: 2%">
        </div>
        <div id="failed_section" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 5">
            <form action="../home/" method="get">
                <input type="hidden" name="task_id" value="{{ task_id }}">
                    <div class="alert alert-dark alert-dismissible fade show">
                        <p>We are very sorry, but we were not able to find tickets for your.</p>
                        <p>Please, reconsider your criteria and retry search.</p>
                        <div align="right">
                            <button class="btn btn-primary" type="submit">Retry!</button>
                        </div>
                    </div>
            </form>
        </div>
        <button onclick="topFunction()" id="myBtn" title="Go to top">Top</button>
        <div id="footer" align="center">
            <hr>
            Copyright &copy; WeekendTrip!
        </div>
    </body>
    <script> build_results_page( "{{ task_id }}" ); </script>
    <script>
        //Get the button:
        mybutton = document.getElementById("myBtn");

        // When the user scrolls down 20px from the top of the document, show the button
        window.onscroll = function() {scrollFunction()};

        function scrollFunction() {
            if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
                mybutton.style.display = "block";
            } else {
                mybutton.style.display = "none";
            }
        }
        function topFunction() {
            document.body.scrollTop = 0; // For Safari
            document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
        }
    </script>>
</html>